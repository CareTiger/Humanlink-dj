<form name="changePasswordForm" class="form-horizontal" role="form">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title">Change Password</h2>
        </div>
        <div class="panel-body">
            <div class="alert alert-danger" ng-if="vm.errorMessagePasswordChange">
                {{ vm.errorMessagePasswordChange }}
            </div>

            <div class="form-group">
                <label class="col-sm-3 control-label" for="old_password">
                    Old Password</label>

                <div class="col-sm-9">
                    <div class="row">
                        <div class="col-sm-10">
                            <input type="password" id="old_password" class="form-control"
                                   name="old_password" placeholder="Enter your old password"
                                   required minlength="6"
                                   ng-model="vm.password.old_password" required>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-3 control-label" for="new_password">
                    New Password</label>

                <div class="col-sm-9">
                    <div class="row">
                        <div class="col-sm-10">
                            <input type="password" id="new_password" class="form-control"
                                   name="new_password" placeholder="Enter your new password"
                                   required minlength="6"
                                   ng-model="vm.password.new_password">

                            <div class="has-warning" ng-if="changePasswordForm.new_password.$dirty">
                                <div class="help-block" ng-messages="changePasswordForm.new_password.$error">
                                    <div ng-message="minlength">Enter at least six characters.
                                        Don't re-use passwords from other websites or include obvious words like
                                        your name or email.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-3 control-label" for="new_password_confirm">
                    Confirm New Password</label>

                <div class="col-sm-9">
                    <div class="row">
                        <div class="col-sm-10">
                            <input type="password" id="new_password_confirm" class="form-control"
                                   name="new_password_confirm" placeholder="Re-enter your new password"
                                   minlength="6" ng-model="vm.password.new_password_confirm"
                                   hl-compare-to="vm.password.new_password">

                            <div class="has-warning"
                                 ng-if="changePasswordForm.new_password.$valid && changePasswordForm.new_password_confirm.$dirty">
                                <div class="help-block"
                                     ng-messages="changePasswordForm.new_password_confirm.$error">
                                    <div ng-message="compareTo">
                                        Oops, this does not match the password you entered above.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-4">
                    <button type="submit"
                            ng-click="vm.changePassword(vm.password.old_password , vm.password.new_password)"
                            ng-disabled="!changePasswordForm.$valid || vm.submitBusy"
                            class="btn btn-block btn-secondary btn-sharp">Save Password
                        <span ng-if="vm.submitBusy"><i class="fa fa-circle-o-notch fa-spin"></i></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>

<form name="closeAccountForm" class="form-horizontal" role="form">
    <div class="panel panel-default">
        <div class="panel-heading">
            <h2 class="panel-title">Close Account</h2>
        </div>
        <div class="panel-body">
            <div class="alert alert-danger" ng-if="vm.errorMessageAccountClose">
                {{ vm.errorMessageAccountClose }}
            </div>
            <div class="form-group">
                <div class="col-sm-3">
                    <label class="control-label">
                        Why do you want to close your Humanlink account?</label>
                </div>
                <div class="col-sm-9">
                    <div class="row" ng-repeat="reason in vm.reasons">
                        <div class="radio col-sm-10">
                            <label>
                                <input type="radio"
                                       ng-model="vm.close.reason"
                                       value="{{ reason.value }}">{{ reason.description }}
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-4">
                    <button type="submit"
                            ng-click="vm.closeAccount(vm.close.reason)"
                            ng-disabled="vm.submitBusy"
                            class="btn btn-block btn-danger btn-sharp">Close Account
                        <span ng-if="vm.submitBusy"><i class="fa fa-circle-o-notch fa-spin"></i></span>
                    </button>
                </div>
            </div>
        </div>
    </div>
</form>

